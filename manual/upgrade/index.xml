<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Upgrade Harvester on Harvester manual test cases</title>
    <link>https://harvester.github.io/tests/manual/upgrade/</link>
    <description>Recent content in Upgrade Harvester on Harvester manual test cases</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <atom:link href="https://harvester.github.io/tests/manual/upgrade/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Check Free disk space percent before upgrade</title>
      <link>https://harvester.github.io/tests/manual/upgrade/4461-check-space-before-upgrade/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/upgrade/4461-check-space-before-upgrade/</guid>
      <description>&lt;ul&gt;&#xA;&lt;li&gt;Related issues: &lt;a href=&#34;https://github.com/harvester/harvester/issues/4611&#34;&gt;#4611&lt;/a&gt; [ENHANCEMENT] Check free disk space percent before upgrade&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;category&#34;&gt;Category:&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Upgrade Harvester&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;verification-steps&#34;&gt;Verification Steps&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Create a new Harvester cluster. Each node&amp;rsquo;s disk space should be 250G.&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Use dd to write files to make sure one of the node&amp;rsquo;s free disk space is 20G, if every node&amp;rsquo;s /usr/local free space is more than 30G&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;dd if=/dev/zero of=/usr/local/test.img bs=1G count=93 .&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Ensure /usr/local did not have enough spaces&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;rancher@n1-240104:~&amp;gt; df -h /usr/local&#xA;Filesystem      Size  Used Avail Use% Mounted on&#xA;/dev/vda5       147G   28G  112G  21% /usr/local&#xA;rancher@n1-240104:~&amp;gt; sudo dd if=/dev/zero of=/usr/local/test.img bs=1G count=93&#xA;93+0 records in&#xA;93+0 records out&#xA;99857989632 bytes (100 GB, 93 GiB) copied, 327.656 s, 305 MB/s&#xA;rancher@n1-240104:~&amp;gt; df -h /usr/local&#xA;Filesystem      Size  Used Avail Use% Mounted on&#xA;/dev/vda5       147G  116G   24G  84% /usr/local&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Create a test version&lt;/p&gt;</description>
    </item>
    <item>
      <title>Rejoin node machine after Harvester upgrade</title>
      <link>https://harvester.github.io/tests/manual/upgrade/rejoin-node-after-upgrade/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/upgrade/rejoin-node-after-upgrade/</guid>
      <description>&lt;ul&gt;&#xA;&lt;li&gt;Related issues: &lt;a href=&#34;https://github.com/harvester/harvester/issues/2655&#34;&gt;#2655&lt;/a&gt; [BUG] reinstall 1st node&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;category&#34;&gt;Category:&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Upgrade Harvester&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;environment-requirement&#34;&gt;Environment requirement&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Network environment has available VLAN id setup on DHCP server&lt;/li&gt;&#xA;&lt;li&gt;DHCP server has setup the IP range can allocate to above VLAN id&lt;/li&gt;&#xA;&lt;li&gt;Harvester node can route to DHCP server through VLAN id to retrieve IP address&lt;/li&gt;&#xA;&lt;li&gt;Network has at least two NICs&lt;/li&gt;&#xA;&lt;li&gt;Suggest not to use SMR type HDD disk&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;verification-steps&#34;&gt;Verification Steps&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Create a 3 nodes v1.0.3 Harvester cluster.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Upgrade Harvester from new cluster network design (after v1.1.0)</title>
      <link>https://harvester.github.io/tests/manual/upgrade/upgrade-from-new-network-design/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/upgrade/upgrade-from-new-network-design/</guid>
      <description>&lt;h2 id=&#34;category&#34;&gt;Category:&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Upgrade Harvester&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;environment-requirement&#34;&gt;Environment requirement&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Network environment has available VLAN id setup on DHCP server&lt;/li&gt;&#xA;&lt;li&gt;DHCP server has setup the IP range can allocate to above VLAN id&lt;/li&gt;&#xA;&lt;li&gt;Harvester node can route to DHCP server through VLAN id to retrieve IP address&lt;/li&gt;&#xA;&lt;li&gt;Network has at least two NICs&lt;/li&gt;&#xA;&lt;li&gt;Suggest not to use SMR type HDD disk&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;We can select VM or Bare machine network setup according to available resource&lt;/p&gt;&#xA;&lt;h2 id=&#34;virtual-machine-environment-setup&#34;&gt;Virtual Machine environment setup&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Clone ipxe-example &lt;a href=&#34;https://github.com/harvester/ipxe-examples&#34;&gt;https://github.com/harvester/ipxe-examples&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Switch to main branch&lt;/li&gt;&#xA;&lt;li&gt;Edit Vagrantfile, add a new network interface of &lt;code&gt;pxe_server.vm.network&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Set the &lt;code&gt;pxe_server.vm.network&lt;/code&gt; bond to correct &lt;code&gt;libvirt&lt;/code&gt; network&lt;/li&gt;&#xA;&lt;li&gt;Add two additional new network interface of &lt;code&gt;harvester_node.vm.network&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Use ipxe-example to provision a multi nodes Harvester cluster&lt;/li&gt;&#xA;&lt;li&gt;Run &lt;code&gt;varant ssh pxe_server&lt;/code&gt; to access pxe server&lt;/li&gt;&#xA;&lt;li&gt;Edit the &lt;code&gt;dhcpd.conf&lt;/code&gt;, let pxe server can create a vlan and assign IP to it&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;bare-machine-environment-setup&#34;&gt;Bare machine environment setup&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Ensure your switch router have setup available VLAN network&lt;/li&gt;&#xA;&lt;li&gt;Setup the VLAN connectivity to your Router/Gateway device&lt;/li&gt;&#xA;&lt;li&gt;Provision a multi nodes Harvester cluster&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;verification-steps&#34;&gt;Verification Steps&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Open Cluster Networks/Configs&lt;/li&gt;&#xA;&lt;li&gt;Create a new cluster network &lt;code&gt;vlan&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Create a network config under cluster network &lt;code&gt;vlan&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Select which node to use this config&lt;/li&gt;&#xA;&lt;li&gt;Select NICs on the uplink page&lt;/li&gt;&#xA;&lt;li&gt;Open Networks page&lt;/li&gt;&#xA;&lt;li&gt;Create vlan &lt;code&gt;1&lt;/code&gt; network on &lt;code&gt;mgmt&lt;/code&gt; cluster network&lt;/li&gt;&#xA;&lt;li&gt;Create another vlan network on &lt;code&gt;vlan&lt;/code&gt; cluster network in step 3&#xA;&lt;img src=&#34;https://user-images.githubusercontent.com/29251855/201615070-969e6c34-1a8e-4540-a750-32f7f38b585c.png&#34; alt=&#34;image&#34;&gt;&lt;/li&gt;&#xA;&lt;li&gt;Create images with different OS distribution&lt;/li&gt;&#xA;&lt;li&gt;Create several virtual machines, set network to &lt;code&gt;management-network&lt;/code&gt; or available &lt;code&gt;vlan&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Create virtual machine on different target node&lt;/li&gt;&#xA;&lt;li&gt;Setup NFS or S3 backup target in settings&lt;/li&gt;&#xA;&lt;li&gt;Backup each virtual machines&lt;/li&gt;&#xA;&lt;li&gt;Shutdown all virtual machines&lt;/li&gt;&#xA;&lt;li&gt;Offline upgrade to target version, refer to &lt;a href=&#34;https://docs.harvesterhci.io/v1.1/upgrade/automatic&#34;&gt;https://docs.harvesterhci.io/v1.1/upgrade/automatic&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Import Harvester into the Rancher cluster&lt;/li&gt;&#xA;&lt;li&gt;Add node after the upgrade&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;expected-results&#34;&gt;Expected Results&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Can completely upgrade Harvester to specific version&lt;/li&gt;&#xA;&lt;li&gt;All pods are running correctly&lt;/li&gt;&#xA;&lt;li&gt;Check that can display the Monitoring Chart&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Prometheus dashboard&lt;/li&gt;&#xA;&lt;li&gt;VM metrics&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Can access dashboard by VIP&lt;/li&gt;&#xA;&lt;li&gt;Can use original password to login&lt;/li&gt;&#xA;&lt;li&gt;Can start VM in running status&lt;/li&gt;&#xA;&lt;li&gt;Image exists without corrupted&lt;/li&gt;&#xA;&lt;li&gt;Volume exists&lt;/li&gt;&#xA;&lt;li&gt;Virtual network exists&lt;/li&gt;&#xA;&lt;li&gt;Backup exists&lt;/li&gt;&#xA;&lt;li&gt;Setting value exists&lt;/li&gt;&#xA;&lt;li&gt;Check the network connectivity of VLAN&lt;/li&gt;&#xA;&lt;li&gt;Can restore VM from backup&lt;/li&gt;&#xA;&lt;li&gt;Can import Harvester in Rancher&lt;/li&gt;&#xA;&lt;li&gt;Can add additional nodes to existing Harvester cluster&lt;/li&gt;&#xA;&lt;li&gt;Can create new vms&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
    <item>
      <title>Upgrade Harvester from traditonal cluster network design (before v1.1.0)</title>
      <link>https://harvester.github.io/tests/manual/upgrade/upgrade-from-traditional-network-design/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/upgrade/upgrade-from-traditional-network-design/</guid>
      <description>&lt;h2 id=&#34;category&#34;&gt;Category:&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Upgrade Harvester&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;environment-requirement&#34;&gt;Environment requirement&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Network environment has available VLAN id setup on DHCP server&lt;/li&gt;&#xA;&lt;li&gt;DHCP server has setup the IP range can allocate to above VLAN id&lt;/li&gt;&#xA;&lt;li&gt;Harvester node can route to DHCP server through VLAN id to retrieve IP address&lt;/li&gt;&#xA;&lt;li&gt;Network has at least two NICs&lt;/li&gt;&#xA;&lt;li&gt;Network has at least two NICs&lt;/li&gt;&#xA;&lt;li&gt;Suggest not to use SMR type HDD disk&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;We can select VM or Bare machine network setup according to available resource&lt;/p&gt;</description>
    </item>
    <item>
      <title>Upgrade Harvester in Fully Airgapped Environment</title>
      <link>https://harvester.github.io/tests/manual/upgrade/fully-airgapped-upgrade/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/upgrade/fully-airgapped-upgrade/</guid>
      <description>&lt;h2 id=&#34;category&#34;&gt;Category:&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Upgrade Harvester&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;environment-requirement&#34;&gt;Environment requirement&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Airgapped Network without internet connectivity&lt;/li&gt;&#xA;&lt;li&gt;Network environment has available VLAN id setup on DHCP server&lt;/li&gt;&#xA;&lt;li&gt;DHCP server has setup the IP range can allocate to above VLAN id&lt;/li&gt;&#xA;&lt;li&gt;Harvester node can route to DHCP server through VLAN id to retrieve IP address&lt;/li&gt;&#xA;&lt;li&gt;Network has at least two NICs&lt;/li&gt;&#xA;&lt;li&gt;Suggest not to use SMR type HDD disk&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h4 id=&#34;we-can-select-vm-or-bare-machine-network-setup-according-to-your-available-resource&#34;&gt;We can select VM or Bare machine network setup according to your available resource&lt;/h4&gt;&#xA;&lt;h2 id=&#34;virtual-machine-environment-setup&#34;&gt;Virtual Machine environment setup&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Clone ipxe-example &lt;a href=&#34;https://github.com/harvester/ipxe-examples&#34;&gt;https://github.com/harvester/ipxe-examples&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Switch to v1.0 or main branch&lt;/li&gt;&#xA;&lt;li&gt;Edit Vagrantfile, add a new network interface of &lt;code&gt;pxe_server.vm.network&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Set the &lt;code&gt;pxe_server.vm.network&lt;/code&gt; bond to correct &lt;code&gt;libvirt&lt;/code&gt; network&lt;/li&gt;&#xA;&lt;li&gt;Add two additional new network interface of &lt;code&gt;harvester_node.vm.network&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Edit the settings.yml, set &lt;code&gt;harvester_network_config.offline: true&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Use ipxe-example to provision a multi nodes Harvester cluster&lt;/li&gt;&#xA;&lt;li&gt;Run &lt;code&gt;varant ssh pxe_server&lt;/code&gt; to access pxe server&lt;/li&gt;&#xA;&lt;li&gt;Edit the &lt;code&gt;dhcpd.conf&lt;/code&gt;, let pxe server can create a vlan and assign IP to it&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;bare-machine-environment-setup&#34;&gt;Bare machine environment setup&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Ensure your switch router have setup VLAN network&lt;/li&gt;&#xA;&lt;li&gt;Setup the VLAN connectivity to your Router/Gateway device&lt;/li&gt;&#xA;&lt;li&gt;Disable internet connectivity on Router&lt;/li&gt;&#xA;&lt;li&gt;Provision a multi nodes Harvester cluster&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;verification-steps&#34;&gt;Verification Steps&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;For &lt;code&gt;VLAN 1&lt;/code&gt; testing, enable network on settings, select &lt;code&gt;harvester-mgmt&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Upgrade Harvester with bonded NICs on network</title>
      <link>https://harvester.github.io/tests/manual/upgrade/bonded-nics-traditional-network-upgrade/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/upgrade/bonded-nics-traditional-network-upgrade/</guid>
      <description>&lt;ul&gt;&#xA;&lt;li&gt;Related issues: &lt;a href=&#34;https://github.com/harvester/harvester/issues/3047&#34;&gt;#3047&lt;/a&gt; [BUG] migrate_harv_mgmt_to_mgmt_br.sh should remove ClusterNetwork resource&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;category&#34;&gt;Category:&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Upgrade Harvester&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;environment-setup-from-v103-upgrade-to-v111&#34;&gt;Environment setup from v1.0.3 upgrade to v1.1.1&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Clone ipxe-example and switch to &lt;code&gt;v1.0&lt;/code&gt; branch&lt;/li&gt;&#xA;&lt;li&gt;Add three additional Network interface in &lt;code&gt;Vagrantfile&lt;/code&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  harvester_node.vm.network &amp;#39;private_network&amp;#39;,&#xA;    libvirt__network_name: &amp;#39;harvester&amp;#39;,&#xA;    mac: @settings[&amp;#39;harvester_network_config&amp;#39;][&amp;#39;cluster&amp;#39;][node_number][&amp;#39;mac&amp;#39;]&#xA;  harvester_node.vm.network &amp;#39;private_network&amp;#39;,&#xA;    libvirt__network_name: &amp;#39;harvester&amp;#39;&#xA;  harvester_node.vm.network &amp;#39;private_network&amp;#39;,&#xA;    libvirt__network_name: &amp;#39;harvester&amp;#39;&#xA;  harvester_node.vm.network &amp;#39;private_network&amp;#39;,&#xA;    libvirt__network_name: &amp;#39;harvester&amp;#39;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;li&gt;Edit the config-create.yaml.j2 and config-join.yaml.j2 in /ansible/role/harvester/template/&lt;/li&gt;&#xA;&lt;li&gt;Add the cluster_network and defaultPysicalNIC to &lt;code&gt;harvester-mgmt&lt;/code&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cluster_networks:&#xA;  vlan:&#xA;    enable: true&#xA;    description: &amp;#34;some description about this cluster network&amp;#34;&#xA;    config:&#xA;      defaultPhysicalNIC: harvester-mgmt&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;li&gt;Bond multiple NICs on &lt;code&gt;harvester-mgmt&lt;/code&gt; and &lt;code&gt;harvester-vlan&lt;/code&gt; networks&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;networks:&#xA;    harvester-mgmt:&#xA;      interfaces:&#xA;      - name: {{ settings[&amp;#39;harvester_network_config&amp;#39;][&amp;#39;cluster&amp;#39;][0][&amp;#39;mgmt_interface&amp;#39;] }}  # The management interface name&#xA;      - name: ens9&#xA;      method: dhcp&#xA;    bond0:&#xA;      interfaces:&#xA;      - name: {{ settings[&amp;#39;harvester_network_config&amp;#39;][&amp;#39;cluster&amp;#39;][0][&amp;#39;vagrant_interface&amp;#39;] }}&#xA;      method: dhcp&#xA;    harvester-vlan:&#xA;      interfaces:&#xA;      - name: ens7&#xA;      - name: ens8&#xA;      method: none&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;verification-steps&#34;&gt;Verification Steps&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Provision previous version of Harvester cluster&lt;/p&gt;</description>
    </item>
    <item>
      <title>Upgrade Harvester with HDD Disks</title>
      <link>https://harvester.github.io/tests/manual/upgrade/upgrade-with-hdd-disk/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/upgrade/upgrade-with-hdd-disk/</guid>
      <description>&lt;h2 id=&#34;category&#34;&gt;Category:&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Upgrade Harvester&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;environment-requirement&#34;&gt;Environment requirement&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Network environment has available VLAN id setup on DHCP server&lt;/li&gt;&#xA;&lt;li&gt;DHCP server has setup the IP range can allocate to above VLAN id&lt;/li&gt;&#xA;&lt;li&gt;Harvester node can route to DHCP server through VLAN id to retrieve IP address&lt;/li&gt;&#xA;&lt;li&gt;Network has at least two NICs&lt;/li&gt;&#xA;&lt;li&gt;Use HDD disk with SMR type or slow I/O speed&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;n1-103:~ # smartctl -a /dev/sda&#xA;smartctl 7.2 2021-09-14 r5237...&#xA;=== START OF INFORMATION SECTION ===&#xA;Model Family:     Seagate BarraCuda 3.5 (SMR)&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;verification-steps&#34;&gt;Verification Steps&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Create images with different OS distribution&lt;/li&gt;&#xA;&lt;li&gt;Create several virtual machines, set network to &lt;code&gt;management-network&lt;/code&gt; or available &lt;code&gt;vlan&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Create virtual machine on different target node&lt;/li&gt;&#xA;&lt;li&gt;Setup NFS or S3 backup target in settings&lt;/li&gt;&#xA;&lt;li&gt;Backup each virtual machines&lt;/li&gt;&#xA;&lt;li&gt;Shutdown all virtual machines&lt;/li&gt;&#xA;&lt;li&gt;Offline upgrade to target version, refer to &lt;a href=&#34;https://docs.harvesterhci.io/v1.1/upgrade/automatic&#34;&gt;https://docs.harvesterhci.io/v1.1/upgrade/automatic&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Apply the increase the job deadline workaround before clicking the upgrade button on dashboard&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ cat &amp;gt; /tmp/fix.yaml &amp;lt;&amp;lt;EOF&#xA;spec:&#xA;values:&#xA;    systemUpgradeJobActiveDeadlineSeconds: &amp;#34;3600&amp;#34;&#xA;EOF&#xA;&#xA;$ kubectl patch managedcharts.management.cattle.io local-managed-system-upgrade-controller --namespace fleet-local --patch-file=/tmp/fix.yaml --type merge&#xA;$ kubectl -n cattle-system rollout restart deploy/system-upgrade-controller&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;expected-results&#34;&gt;Expected Results&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Can completely upgrade Harvester to specific version&lt;/li&gt;&#xA;&lt;li&gt;All pods is running correctly&lt;/li&gt;&#xA;&lt;li&gt;Check can display Monitoring Chart&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Prometheus dashboard&lt;/li&gt;&#xA;&lt;li&gt;VM metrics&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Can access dashboard by VIP&lt;/li&gt;&#xA;&lt;li&gt;Can use original password to login&lt;/li&gt;&#xA;&lt;li&gt;Can start VM in running status&lt;/li&gt;&#xA;&lt;li&gt;Image exists without corrupted&lt;/li&gt;&#xA;&lt;li&gt;Volume exists&lt;/li&gt;&#xA;&lt;li&gt;Virtual network exists&lt;/li&gt;&#xA;&lt;li&gt;Backup exists&lt;/li&gt;&#xA;&lt;li&gt;Setting value exists&lt;/li&gt;&#xA;&lt;li&gt;Check the network connectivity of VLAN&lt;/li&gt;&#xA;&lt;li&gt;Can restore VM from backup&lt;/li&gt;&#xA;&lt;li&gt;Can import Harvester in Rancher&lt;/li&gt;&#xA;&lt;li&gt;Can add additional nodes to existing Harvester cluster&lt;/li&gt;&#xA;&lt;li&gt;Can create new vms&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
    <item>
      <title>Upgrade Harvester with IPv6 DHCP</title>
      <link>https://harvester.github.io/tests/manual/upgrade/ipv6-dhcp-upgrade/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/upgrade/ipv6-dhcp-upgrade/</guid>
      <description>&lt;ul&gt;&#xA;&lt;li&gt;Related issues: &lt;a href=&#34;https://github.com/harvester/harvester/issues/2962&#34;&gt;#2962&lt;/a&gt; [BUG] Host IP is inconsistent&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;category&#34;&gt;Category:&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Upgrade Harvester&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;environment-setup&#34;&gt;Environment setup&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Open the virtual machine manager&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Open the Connection Details -&amp;gt; Virtual Networks&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Create a new virtual network &lt;code&gt;workload&lt;/code&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Add the following XML content&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;network&amp;gt;&#xA;&amp;lt;name&amp;gt;workload&amp;lt;/name&amp;gt;&#xA;&amp;lt;uuid&amp;gt;ac62e6bf-6869-41a9-a2b7-25c06c7601c9&amp;lt;/uuid&amp;gt;&#xA;&amp;lt;forward mode=&amp;#34;nat&amp;#34;&amp;gt;&#xA;    &amp;lt;nat&amp;gt;&#xA;    &amp;lt;port start=&amp;#34;1024&amp;#34; end=&amp;#34;65535&amp;#34;/&amp;gt;&#xA;    &amp;lt;/nat&amp;gt;&#xA;&amp;lt;/forward&amp;gt;&#xA;&amp;lt;bridge name=&amp;#34;virbr5&amp;#34; stp=&amp;#34;on&amp;#34; delay=&amp;#34;0&amp;#34;/&amp;gt;&#xA;&amp;lt;mac address=&amp;#34;52:54:00:7b:ed:99&amp;#34;/&amp;gt;&#xA;&amp;lt;domain name=&amp;#34;workload&amp;#34;/&amp;gt;&#xA;&amp;lt;ip address=&amp;#34;192.168.101.1&amp;#34; netmask=&amp;#34;255.255.255.0&amp;#34;&amp;gt;&#xA;    &amp;lt;dhcp&amp;gt;&#xA;    &amp;lt;range start=&amp;#34;192.168.101.128&amp;#34; end=&amp;#34;192.168.101.254&amp;#34;/&amp;gt;&#xA;    &amp;lt;/dhcp&amp;gt;&#xA;&amp;lt;/ip&amp;gt;&#xA;&amp;lt;ip family=&amp;#34;ipv6&amp;#34; address=&amp;#34;fd7d:844d:3e17:f3ae::1&amp;#34; prefix=&amp;#34;64&amp;#34;&amp;gt;&#xA;    &amp;lt;dhcp&amp;gt;&#xA;    &amp;lt;range start=&amp;#34;fd7d:844d:3e17:f3ae::100&amp;#34; end=&amp;#34;fd7d:844d:3e17:f3ae::1ff&amp;#34;/&amp;gt;&#xA;    &amp;lt;/dhcp&amp;gt;&#xA;&amp;lt;/ip&amp;gt;&#xA;&amp;lt;/network&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Change the bridge name to a new one&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
